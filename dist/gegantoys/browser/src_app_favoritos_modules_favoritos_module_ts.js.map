{"version":3,"file":"src_app_favoritos_modules_favoritos_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAOyC;AAEyB;;;;;;;;;;ICPlE,yEAA+C;IAC3C,4EAA4D;IAChE,4DAAM;;;IAcc,qEAA6G;;;;IAAvE,qJAAqB;;;IAC3D,qEAA+J;;;;IAAvH,0NAAwD;;;;IASpG,0EAA4C;IACwB,mZAAS,qGAAgC,KAAC;IACtG,8DAAmL;IAAnL,0EAAmL;IAC/K,sEAAsQ;IAC1Q,4DAAM;IACN,+DAAmF;IAAnF,2EAAmF;IAAA,gFAAqB;IAAA,4DAAO;;;;IApB/H,yEAA4G;IAKhG,iIAA6G;IAC7G,iIAA+J;IACnK,4DAAI;IAEJ,0EAA+F;IAAA,uDAA6B;IAAA,4DAAM;IAIlI,0EAAmD;IAAA,uDAAoD;;IAAA,4DAAM;IAE7G,mIAOM;IAEV,4DAAM;;;IApBgC,0DAAmD;IAAnD,qKAAmD;IAC3E,0DAA8B;IAA9B,6FAA8B;IAC7B,0DAA+B;IAA/B,8FAA+B;IAGqD,0DAA6B;IAA7B,2FAA6B;IAIzE,0DAAoD;IAApD,+KAAoD;IAEjG,0DAAiB;IAAjB,gFAAiB;;;IAjBnC,yEAA2D;IAEvD,4HAyBM;IACV,4DAAM;;;IA1BwB,0DAAc;IAAd,qFAAc;;;IANhD,yEAA+C;IAEhB,gFAAqB;IAAA,4DAAM;IAEtD,oHA4BM;IACV,4DAAM;;;IA7BI,0DAAe;IAAf,kFAAe;;ADMlB,MAAM,kBAAkB;IAS7B,YACsB,SAAsB,EACtB,KAAsB;QADtB,cAAS,GAAT,SAAS,CAAa;QACtB,UAAK,GAAL,KAAK,CAAiB;QAP5C,WAAM,GAAW,KAAK,CAAC;QAGvB,eAAU,GAAa,EAAE,CAAC;QAOpB,IAAI,CAAC,MAAM,GAAG,4CAAW,GAAG,yCAAQ,GAAG,UAAU,GAAG,yCAAQ,CAAC;QAG7D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC;YAClC,IAAI,EAAC,CAAC,SAAmB,EAAE,EAAE;gBAC3B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC;gBACrC,UAAU;gBACV,mDAAmD;YACrD,CAAC;SACF,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC;YACtC,IAAI,EAAC,CAAC,aAA4B,EAAE,EAAE;gBACpC,IAAI,CAAC,SAAS,GAAG,aAAa,CAAC,SAAS,CAAC;gBACzC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAE,CAAC,QAAiB,EAAE,EAAE,GAAG,OAAO,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,YAAY,GAAG,yCAAQ,GAAG,QAAQ,CAAC,UAAU,GAAG,yCAAQ,GAAG,QAAQ,CAAC,eAAe,CAAE,EAAC,CAAC,CAAE,CAAC;gBAC7N,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACrB,CAAC;SAEF,CAAC,CAAC;IAGT,CAAC;IAED,QAAQ;QAEN,IAAI,CAAC,uBAAuB,EAAE,CAAC;IAEjC,CAAC;IAGD,uBAAuB;QAErB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,4EAAqC,CAAC,EAAC,MAAM,EAAC,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;IAElF,CAAC;IAED,mBAAmB,CAAC,UAAiB;QAEnC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,qEAA8B,CAAC,EAAC,UAAU,EAAC,UAAU,EAAC,CAAC,CAAC;IAE9E,CAAC;;oFAtDU,kBAAkB;gHAAlB,kBAAkB;QCf/B,8GAEM;QAGN,8GAiCM;;QAtCA,6EAAa;QAKb,0DAAY;QAAZ,4EAAY;;;;;;;;;;;;;;;;;;;ACL+D;AAC1B;;;AAKvD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,yFAAkB;KAC9B;CACF,CAAC;AASK,MAAM,sBAAsB;;4FAAtB,sBAAsB;mHAAtB,sBAAsB;uHAJvB,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAGX,sBAAsB,oFAHvB,yDAAY;;;;;;;;;;;;;;;;;;;;;;AClBuB;AACqB;AACa;AACH;AACoB;AACrB;;AAkBtE,MAAM,eAAe;;8EAAf,eAAe;4GAAf,eAAe;gHATxB,yDAAY;QACZ,4GAA0B;QAC1B,uFAAgB;QAChB,wFAAwB;QACxB,6EAAsB;mIAKb,eAAe,mBAZxB,yFAAkB,aAGlB,yDAAY;QACZ,4GAA0B;QAC1B,uFAAgB;QAChB,wFAAwB;QACxB,6EAAsB;;;;;;;;;;;;;;;;;;AClBqB;AACY;;AAepD,MAAM,gBAAgB;;gFAAhB,gBAAgB;6GAAhB,gBAAgB;iHANzB,yDAAY;mIAMH,gBAAgB,mBATzB,mEAAc,aAGd,yDAAY,aAGZ,mEAAc;;;;;;;;;;;;;;;;;;ACb6B;AACiC;;AAgBzE,MAAM,0BAA0B;;oGAA1B,0BAA0B;uHAA1B,0BAA0B;2HANnC,yDAAY;mIAMH,0BAA0B,mBATnC,wFAAwB,aAGxB,yDAAY,aAGZ,wFAAwB;;;;;;;;;;;;;;;;;ACVrB,MAAM,cAAc;IAEzB,SAAS,CAAC,KAAuB,EAAE,GAAG,IAAc;QAElD,IAAI,EAAU,CAAC;QACf,IAAI,EAAU,CAAC;QACf,IAAI,IAAY,CAAC;QACjB,IAAI,QAAgB,CAAC;QACrB,IAAI,QAAgB,CAAC;QACrB,IAAI,SAAS,GAAW,EAAE,CAAC;QAE3B,IAAI,aAAa,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAE,CAAC;QAClD,IAAI,IAAI,GAAW,IAAI,CAAC,CAAC,CAAC,CAAC;QAE3B,EAAE,GAAG,aAAa,CAAC,OAAO,EAAE,CAAC;QAC7B,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAClC,IAAI,GAAG,aAAa,CAAC,WAAW,EAAE,CAAC;QAEnC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC7B,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAE7B,IAAI,IAAI,KAAK,CAAC,EAAE;YACd,SAAS,GAAG,QAAQ,GAAG,QAAQ,GAAG,IAAI,CAAC;SACxC;QACD,IAAI,IAAI,KAAK,CAAC,EAAE;YACd,SAAS,GAAG,QAAQ,GAAG,KAAK,GAAG,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC;SACxD;QACD,IAAI,IAAI,KAAK,CAAC,EAAE;YACd,SAAS,GAAG,QAAQ,GAAG,GAAG,GAAG,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC;SACpD;QACD,IAAI,IAAI,KAAK,CAAC,EAAE;YACd,SAAS,GAAG,IAAI,GAAG,GAAG,GAAG,QAAQ,GAAG,GAAG,GAAG,QAAQ,CAAC;SACpD;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;IAEO,QAAQ,CAAC,WAAmB;QAClC,OAAO,WAAW,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;IACpE,CAAC;;4EAvCU,cAAc;4HAAd,cAAc;;;;;;;;;;;;;;;;;ACEpB,MAAM,wBAAwB;IAEnC,SAAS,CAAC,KAAc,EAAE,GAAG,IAAe;QAE1C,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,yCAAyC,CAAC;IAEnE,CAAC;;gGANU,wBAAwB;gJAAxB,wBAAwB","sources":["./src/app/favoritos/components/favoritos/favoritos.component.ts","./src/app/favoritos/components/favoritos/favoritos.component.html","./src/app/favoritos/modules/favoritos-routing.module.ts","./src/app/favoritos/modules/favoritos.module.ts","./src/app/shared/modules/format-date.module.ts","./src/app/shared/modules/mostrar-imagen-defecto.module.ts","./src/app/shared/pipes/format-date.pipe.ts","./src/app/shared/pipes/mostrar-imagen-defecto.pipe.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport { Store } from '@ngrx/store';\nimport { AppState } from 'src/app/app.reducers';\nimport { AuthState } from 'src/app/auth/reducers';\nimport { Favorito } from 'src/app/shared/models/favorito.interface';\nimport { FavoritosService } from 'src/app/shared/services/favoritos.service';\nimport * as varG from '../../../globals';\nimport { FavoritoState } from '../../reducer/favoritos.reducer';\nimport * as favoritoActions from '../../actions/favoritos.action';\n\n\n@Component({\n  selector: 'app-favoritos',\n  templateUrl: './favoritos.component.html',\n  styleUrls: ['./favoritos.component.scss']\n})\nexport class FavoritosComponent implements OnInit {\n\n\n  favoritos!:Favorito[];\n  loaded:boolean = false;\n  userId!:string;\n  server!:string;\n  trustedUrl:SafeUrl[] = [];\n\n  constructor( \n                private sanitizer:DomSanitizer,\n                private store: Store<AppState>\n             ) { \n\n        this.server = varG.server + varG.sep + 'Juguetes' + varG.sep; \n     \n\n        this.store.select('auth').subscribe({\n          next:(authState:AuthState) => {\n            this.userId = authState.auth.user_id;\n            //PRINT   \n            //console.log('Usuario del Store: ', this.user_id);\n          }\n        });\n\n        this.store.select('favorito').subscribe({\n          next:(favoritoState: FavoritoState) => {\n            this.favoritos = favoritoState.favoritos;\n            this.trustedUrl = this.favoritos.map( (favorito:Favorito) => { return this.sanitizer.bypassSecurityTrustUrl(this.server + favorito.categoria_id + varG.sep + favorito.juguete_id + varG.sep + favorito.imagen_favorito ) } );\n            this.loaded = true;\n          } \n\n        });\n        \n\n  }\n\n  ngOnInit(): void {\n\n    this.getListaFavoritosByUser();\n\n  }\n\n\n  getListaFavoritosByUser():void {\n\n    this.store.dispatch(favoritoActions.getAllFavoritosByUser({idUser:this.userId}))\n    \n  }\n\n  eliminarDeFavoritos(idFavorito:string):void {\n\n    this.store.dispatch(favoritoActions.deleteFavorito({idFavorito:idFavorito}))\n\n  }\n}\n","\n\n<div *ngIf=\"!loaded\" class=\"w-screen h-screen\">\n    <mat-spinner class=\"mx-auto top:32 sm:top-96\"></mat-spinner>\n</div>\n\n\n<div *ngIf=\"loaded\"  class=\"contenedor-pagina\">\n\n    <div class=\"titulo-pagina\">Tu lista de favoritos</div>\n    \n    <div *ngIf=\"favoritos\" class=\"flex flex-wrap justify-left\">\n\n        <div *ngFor=\"let favorito of favoritos; index as i\" class=\"w-1/2 sm:w-1/3 2xl:w-1/4  sm:p-5 2xl:p-9 pr-2\"  > \n\n            <div mat-card-sm-image class=\" border-solid border rounded border-silver my-3\">\n\n                <a class=\"text-decoration-none \"  [routerLink]=\"['/juguete/', favorito.juguete_id  ]\" >\n                    <img *ngIf=\"favorito.imagen_favorito\" [src]=\"trustedUrl[i]\" class=\"w-full h-32 sm:h-48 2xl:h-80 object-fit\" >\n                    <img  *ngIf=\"!favorito.imagen_favorito\" [src]=\"favorito.imagen_favorito | mostrarImagenDefecto \" class=\"w-full h-32 sm:h-48 2xl:h-80 object-fit imagen-vacia\" >\n                </a>\n\n                <div class=\" text-sm sm:text-base font-thin text-left px-2  py-2 sm:p-4 text-orange-electric\" >{{ favorito.titulo_juguete }}</div>\n                \n                <!-- <div class=\" text-xs sm:text-sm text-left py-2 px-2 sm:p-4\">{{ favorito.categoria?.nombre_categoria }}</div> -->\n\n                <div class=\" text-xs text-left py-2 px-2 sm:p-4 \" >Desde: {{ favorito.fecha_favorito | formatDate: 3 }}</div>\n\n                <div *ngIf=\"favorito.id\" class=\"py-2 px-2\" >\n                    <button type=\"button\" class=\"btn btn-danger py-2 px-2 sm:px-4 \" (click)=\"eliminarDeFavoritos(favorito.id)\" >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" class=\"bi bi-star-fill sm:w-5 sm:h-5 w-4 h-4 text-naranja-oscuro inline mr-1 sm:mr-3 align-middle\" viewBox=\"0 0 16 16\">\n                            <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\n                        </svg>  \n                        <span class=\"align-middle text-xs sm:text-sm text-naranja-oscuro hover:text-white\">Eliminar de favoritos</span>\n                    </button>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FavoritosComponent } from '../components/favoritos/favoritos.component';\nimport { Routes, RouterModule } from '@angular/router';\n\n\n\n\nconst routes: Routes = [\n  { \n    path: '', \n    component: FavoritosComponent,\n  },\n];\n\n\n@NgModule({\n\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n\n})\nexport class FavoritosRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FavoritosRoutingModule } from './favoritos-routing.module';\nimport { FavoritosComponent } from '../components/favoritos/favoritos.component';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MostrarImagenDefectoModule } from 'src/app/shared/modules/mostrar-imagen-defecto.module';\nimport { FormatDateModule } from 'src/app/shared/modules/format-date.module';\n\n\n\n@NgModule({\n  declarations: [\n    FavoritosComponent,\n  ],\n  imports: [\n    CommonModule,\n    MostrarImagenDefectoModule,\n    FormatDateModule,\n    MatProgressSpinnerModule,\n    FavoritosRoutingModule,\n    \n\n  ]\n})\nexport class FavoritosModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormatDatePipe } from '../pipes/format-date.pipe';\n\n\n\n@NgModule({\n  declarations: [\n    FormatDatePipe\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports:[\n    FormatDatePipe\n  ]\n})\nexport class FormatDateModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MostrarImagenDefectoPipe } from '../pipes/mostrar-imagen-defecto.pipe';\n\n\n\n@NgModule({\n  declarations: [\n\n    MostrarImagenDefectoPipe\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    MostrarImagenDefectoPipe\n  ]\n})\nexport class MostrarImagenDefectoModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'formatDate'\n})\nexport class FormatDatePipe implements PipeTransform {\n\n  transform(value: Date | undefined, ...args: number[]): unknown {\n    \n    let dd: number;\n    let mm: number;\n    let yyyy: number;\n    let ddFormat: string;\n    let mmFormat: string;\n    let newFormat: string = '';\n\n    let dateTransform = new Date(value ? value : '' );\n    let type: number = args[0];\n\n    dd = dateTransform.getDate();\n    mm = dateTransform.getMonth() + 1;\n    yyyy = dateTransform.getFullYear();\n\n    ddFormat = this.needZero(dd);\n    mmFormat = this.needZero(mm);\n\n    if (type === 1) {\n      newFormat = ddFormat + mmFormat + yyyy;\n    }\n    if (type === 2) {\n      newFormat = ddFormat + ' / ' + mmFormat + ' / ' + yyyy;\n    }\n    if (type === 3) {\n      newFormat = ddFormat + '/' + mmFormat + '/' + yyyy;\n    }\n    if (type === 4) {\n      newFormat = yyyy + '-' + mmFormat + '-' + ddFormat;\n    }\n\n    return newFormat;\n  }\n\n  private needZero(checkNumber: number): string {\n    return checkNumber < 10 ? '0' + checkNumber : String(checkNumber);\n  }\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { SafeUrl } from '@angular/platform-browser';\n\n\n@Pipe({\n  name: 'mostrarImagenDefecto'\n})\nexport class MostrarImagenDefectoPipe implements PipeTransform {\n\n  transform(value: unknown, ...args: unknown[]): unknown {\n\n    return value ? value : 'assets/imagen-defecto/image-regular.svg'; \n\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}